# Phase 1: Test Generation

## CRITICAL: TRUST THE SPEC

The specification below is COMPLETE. Do not:
- Read README, ARCHITECTURE, or documentation files
- Search for patterns or conventions in the codebase
- Explore directory structures
- Read files unrelated to test generation

Only read files that:
1. You need to import from (check the target path's neighbors)
2. Contain types/classes referenced in the interface

The spec tells you exactly what to test. Trust it.

## CIRCUIT BREAKER

If you have made 8+ file reads without writing any code, STOP.
You are exploring instead of implementing. The spec is complete.
Write the tests now with what you know.

## CRITICAL CONSTRAINT: DO NOT WRITE IMPLEMENTATION CODE

You are FORBIDDEN from writing implementation code in this phase.
Your ONLY task is to generate the test file.
Do not create the implementation file.
Do not write any production code.
Only write tests.

## THE SPECIFICATION

# Specification: InterviewRecoveryFeatures
Tier: FEATURE

## Description
Add three recovery features for live interview reliability.

## Interface
- `StealthOverlay.show_transcript(text: str) -> None` — Display heard text above response
- `TrayApp._on_retry_hotkey() -> None` — Re-send last transcript
- `TrayApp._on_cancel_response() -> None` — Cancel current streaming

## Must Do
- Store last transcript for retry functionality
- Show transcript label above response in overlay
- Track streaming task for cancellation
- Wire up F10 and Escape hotkeys via pynput
- Keep transcript visible during response streaming
- Show "Cancelled - press F10 to retry" message on cancel

## Must Not Do
- Change provider implementations
- Modify SessionManager
- Change the audio capture flow
- Add new dependencies

## Edge Cases
- F10 with no previous transcript → ignore silently
- F10 while already responding → ignore silently
- Escape when not responding → ignore silently
- Cancel then retry → should work (signals reconnected)

## Validation
- Tests: pytest tests/ -v

## YOUR TASK

Create a pytest test suite at: `tests/test_interviewrecoveryfeatures.py`

Test Generation Rules:
1. Create one test per 'Must Do' requirement
2. Create one test per edge case
3. Create tests for precondition violations
4. Create tests for postcondition verification
5. Create tests verifying 'Must Not Do' constraints

Write tests that will FAIL until implementation exists.
Do NOT write any implementation code.

Write clean, scalable, modular, efficient code. Follow single responsibility principle. Do not repeat yourself. Use consistent naming conventions. No unnecessary comments.